<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rekap 3D - Filter Kepala & Ekor</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding-top: 70px; }
    textarea { font-family: monospace; }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Rekap 3D</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="index.html">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" href="filter.html">Filter</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Konten -->
<div class="container">
  <h3 class="mb-3">Filter Angka 3D</h3>
  
  <div class="mb-3">
    <label class="form-label">Daftar Angka 3D (max 15 baris, max 8 digit per baris)</label>
    <textarea id="angkaData" class="form-control" rows="5" placeholder="Contoh:&#10;123&#10;456"></textarea>
  </div>

  <div class="mb-3">
    <label class="form-label">Angka Main Kepala</label>
    <input type="text" id="angkaKepala" class="form-control" placeholder="Misal: 1 2 3">
  </div>

  <div class="mb-3">
    <label class="form-label">Angka Main Ekor</label>
    <input type="text" id="angkaEkor" class="form-control" placeholder="Misal: 4 5 6">
  </div>

  <button class="btn btn-primary mb-3" onclick="filterData()">Filter</button>

  <h4>Hasil Filter</h4>
  <table class="table table-bordered table-sm">
    <thead>
      <tr>
        <th>No</th>
        <th>Angka 3D</th>
        <th>Kepala</th>
        <th>Ekor</th>
        <th>Angka Main Crass</th>
      </tr>
    </thead>
    <tbody id="hasilFilter"></tbody>
  </table>
</div>

<script>
let currentData = [];

function filterData() {
  let dataInput = document.getElementById("angkaData").value.trim().split("\n").filter(v => v.trim() !== "");
  let kepalaMain = document.getElementById("angkaKepala").value.trim().split(/\s+/);
  let ekorMain = document.getElementById("angkaEkor").value.trim().split(/\s+/);

  // Jika pertama kali input â†’ set data awal
  if (currentData.length === 0) {
    currentData = dataInput;
  }

  // Filter kepala
  if (kepalaMain.length > 0 && kepalaMain[0] !== "") {
    currentData = currentData.filter(num => kepalaMain.includes(num[1])); // index[1] = kepala
  }

  // Filter ekor
  if (ekorMain.length > 0 && ekorMain[0] !== "") {
    currentData = currentData.filter(num => ekorMain.includes(num[2])); // index[2] = ekor
  }

  // Tampilkan hasil
  let tbody = document.getElementById("hasilFilter");
  tbody.innerHTML = "";
  currentData.forEach((num, i) => {
    let kepala = num[1];
    let ekor = num[2];
    tbody.innerHTML += `
      <tr>
        <td>${i + 1}</td>
        <td>${num}</td>
        <td>${kepala}</td>
        <td>${ekor}</td>
        <td>${kepala} - ${ekor}</td>
      </tr>
    `;
  });
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
